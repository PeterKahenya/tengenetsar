{% extends '../base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/calling_page.css' %}">
<div id="start_call_page">
    <div class="d-flex align-items-center flex-column">
        <span class="material-icons text-white" style="font-size:5rem" >
            account_circle
        </span>

        <div>
            <h5 class="text-white">{{call.expert.user.first_name}} {{call.expert.user.last_name}}</h5>
        </div>
        
    </div>
    <div id="logs" class="text-white display-4">
		Calling...
    </div>  
    
</div>
<div id="live_calling_page"  class="row main_container" style="display: none;">
	<div class="col-xs-12 col-sm-12 col-md-8 col-lg-8 col-xl-8 shadow videos_holder">
		  <video autoplay playsinline id="other_video" width="100%"></video>
		  
		  <input type="hidden" id="caller_id" value="{{call.caller.id}}"/>
		  <input type="hidden" id="expert_id" value="{{call.expert.id}}"/>
		  <input type="hidden" id="call_id" value="{{call.id}}"/>
		  <input type="hidden" id="user" value="caller"/>
		  <input type="hidden" id="room_id" value=""/>



		 
		  <div class="live-controls">
			<div class="top-controls">
				<button id="flip_camera_btn" style="float: right;display: block!important" class="material-icons btn text-white control-buttons">
					flip_camera_android
				</button>
			</div>
			<div class="bottom-controls">
				<button id="mic_off_btn" class="material-icons btn btn-outline-light control-buttons">
					mic
				</button>
				<button id="videocam_off_btn" class="material-icons btn btn-outline-light control-buttons">
					videocam
				</button>
				<button id="hangup_btn" class="material-icons btn btn-outline-light control-buttons">
					call
				</button>
				<video autoplay playsinline id="my_video"></video>
			</div>
		  </div>
	</div>
	<div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4 chats">
		<div id="chat_logs">
			
		</div>
		<div class="chatbox">
			<input id="my_chat_text_area" placeholder="Enter message..." />
			<button class="btn btn-primary material-icons" id="send_chat_btn">
				send
			</button>
		</div>
	</div>
</div>
<script src="{% static 'js/peerjs.min.js' %}" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="{% static 'js/call.js' %}" type="text/javascript"></script>

{% endblock content %}
